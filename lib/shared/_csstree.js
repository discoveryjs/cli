!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).csstree=e()}(this,(function(){"use strict";let t=null;var e=class e{static createItem(t){return{prev:null,next:null,data:t}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(t){return e.createItem(t)}allocateCursor(e,n){let i;return null!==t?(i=t,t=t.cursor,i.prev=e,i.next=n,i.cursor=this.cursor):i={prev:e,next:n,cursor:this.cursor},this.cursor=i,i}releaseCursor(){const{cursor:e}=this;this.cursor=e.cursor,e.prev=null,e.next=null,e.cursor=t,t=e}updateCursors(t,e,n,i){let{cursor:r}=this;for(;null!==r;)r.prev===t&&(r.prev=e),r.next===n&&(r.next=i),r=r.cursor}*[Symbol.iterator](){for(let t=this.head;null!==t;t=t.next)yield t.data}get size(){let t=0;for(let e=this.head;null!==e;e=e.next)t++;return t}get isEmpty(){return null===this.head}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(t){let n=null;this.head=null;for(let i of t){const t=e.createItem(i);null!==n?n.next=t:this.head=t,t.prev=n,n=t}return this.tail=n,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(t,e=this){const n=this.allocateCursor(null,this.head);for(;null!==n.next;){const i=n.next;n.next=i.next,t.call(e,i.data,i,this)}this.releaseCursor()}forEachRight(t,e=this){const n=this.allocateCursor(this.tail,null);for(;null!==n.prev;){const i=n.prev;n.prev=i.prev,t.call(e,i.data,i,this)}this.releaseCursor()}some(t,e=this){for(let n=this.head;null!==n;n=n.next)if(t.call(e,n.data,n,this))return!0;return!1}map(t,n=this){const i=new e;for(let e=this.head;null!==e;e=e.next)i.appendData(t.call(n,e.data,e,this));return i}filter(t,n=this){const i=new e;for(let e=this.head;null!==e;e=e.next)t.call(n,e.data,e,this)&&i.appendData(e.data);return i}nextUntil(t,e,n=this){if(null===t)return;const i=this.allocateCursor(null,t);for(;null!==i.next;){const t=i.next;if(i.next=t.next,e.call(n,t.data,t,this))break}this.releaseCursor()}prevUntil(t,e,n=this){if(null===t)return;const i=this.allocateCursor(t,null);for(;null!==i.prev;){const t=i.prev;if(i.prev=t.prev,e.call(n,t.data,t,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const t=new e;for(let e of this)t.appendData(e);return t}prepend(t){return this.updateCursors(null,t,this.head,t),null!==this.head?(this.head.prev=t,t.next=this.head):this.tail=t,this.head=t,this}prependData(t){return this.prepend(e.createItem(t))}append(t){return this.insert(t)}appendData(t){return this.insert(e.createItem(t))}insert(t,e=null){if(null!==e)if(this.updateCursors(e.prev,t,e,t),null===e.prev){if(this.head!==e)throw new Error("before doesn't belong to list");this.head=t,e.prev=t,t.next=e,this.updateCursors(null,t)}else e.prev.next=t,t.prev=e.prev,e.prev=t,t.next=e;else this.updateCursors(this.tail,t,null,t),null!==this.tail?(this.tail.next=t,t.prev=this.tail):this.head=t,this.tail=t;return this}insertData(t,n){return this.insert(e.createItem(t),n)}remove(t){if(this.updateCursors(t,t.prev,t,t.next),null!==t.prev)t.prev.next=t.next;else{if(this.head!==t)throw new Error("item doesn't belong to list");this.head=t.next}if(null!==t.next)t.next.prev=t.prev;else{if(this.tail!==t)throw new Error("item doesn't belong to list");this.tail=t.prev}return t.prev=null,t.next=null,t}push(t){this.insert(e.createItem(t))}pop(){return null!==this.tail?this.remove(this.tail):null}unshift(t){this.prepend(e.createItem(t))}shift(){return null!==this.head?this.remove(this.head):null}prependList(t){return this.insertList(t,this.head)}appendList(t){return this.insertList(t)}insertList(t,e){return null===t.head||(null!=e?(this.updateCursors(e.prev,t.tail,e,t.head),null!==e.prev?(e.prev.next=t.head,t.head.prev=e.prev):this.head=t.head,e.prev=t.tail,t.tail.next=e):(this.updateCursors(this.tail,t.tail,null,t.head),null!==this.tail?(this.tail.next=t.head,t.head.prev=this.tail):this.head=t.head,this.tail=t.tail),t.head=null,t.tail=null),this}replace(t,e){"head"in e?this.insertList(e,t):this.insert(e,t),this.remove(t)}},n=function(t,e){const n=Object.create(SyntaxError.prototype),i=new Error;return n.name=t,n.message=e,Object.defineProperty(n,"stack",{get:function(){return(i.stack||"").replace(/^(.+\n){1,3}/,t+": "+e+"\n")}}),n};function i(t,e){function n(t,e){return i.slice(t,e).map((e,n)=>String(t+n+1).padStart(a)+" |"+e).join("\n")}const i=t.source.split(/\r\n?|\n|\f/),r=t.line,s=Math.max(1,r-e)-1,o=Math.min(r+e,i.length+1),a=Math.max(4,String(o).length)+1;let c=t.column,l=0;c+=("    ".length-1)*(i[r-1].substr(0,c-1).match(/\t/g)||[]).length,c>100&&(l=c-60+3,c=58);for(let t=s;t<=o;t++)t>=0&&t<i.length&&(i[t]=i[t].replace(/\t/g,"    "),i[t]=(l>0&&i[t].length>l?"…":"")+i[t].substr(l,98)+(i[t].length>l+100-1?"…":""));return[n(s,r),new Array(c+a+2).join("-")+"^",n(r,o)].filter(Boolean).join("\n")}var r=function(t,e,r,s,o){const a=n("SyntaxError",t);return a.source=e,a.offset=r,a.line=s,a.column=o,a.sourceFragment=t=>i(a,isNaN(t)?0:t),Object.defineProperty(a,"formattedMessage",{get:()=>"Parse error: "+a.message+"\n"+i(a,2)}),a.parseError={offset:r,line:s,column:o},a};var s=function(t=null,e){return null===t||t.length<e?new Uint32Array(Math.max(e+1024,16384)):t};function o(t){return t>=48&&t<=57}function a(t){return t>=65&&t<=90}function c(t){return t>=97&&t<=122}function l(t){return a(t)||c(t)}function h(t){return t>=128}function u(t){return l(t)||h(t)||95===t}function p(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t}function f(t){return 10===t||13===t||12===t}function d(t){return f(t)||32===t||9===t}function k(t,e){return 92===t&&(!f(e)&&0!==e)}const m=new Array(128);g.Eof=128,g.WhiteSpace=130,g.Digit=131,g.NameStart=132,g.NonPrintable=133;for(let t=0;t<m.length;t++)m[t]=d(t)&&g.WhiteSpace||o(t)&&g.Digit||u(t)&&g.NameStart||p(t)&&g.NonPrintable||t||g.Eof;function g(t){return t<128?m[t]:g.NameStart}var S={isDigit:o,isHexDigit:function(t){return o(t)||t>=65&&t<=70||t>=97&&t<=102},isUppercaseLetter:a,isLowercaseLetter:c,isLetter:l,isNonAscii:h,isNameStart:u,isName:function(t){return u(t)||o(t)||45===t},isNonPrintable:p,isNewline:f,isWhiteSpace:d,isValidEscape:k,isIdentifierStart:function(t,e,n){return 45===t?u(e)||45===e||k(e,n):!!u(t)||92===t&&k(t,e)},isNumberStart:function(t,e,n){return 43===t||45===t?o(e)?2:46===e&&o(n)?3:0:46===t?o(e)?2:0:o(t)?1:0},isBOM:function(t){return 65279===t||65534===t?1:0},charCodeCategory:g};const{isDigit:y,isHexDigit:C,isUppercaseLetter:b,isName:v,isWhiteSpace:x,isValidEscape:L}=S;function w(t,e){return e<t.length?t.charCodeAt(e):0}function A(t,e,n){return 13===n&&10===w(t,e+1)?2:1}function P(t,e,n){let i=t.charCodeAt(e);return b(i)&&(i|=32),i===n}function D(t,e){for(;e<t.length&&y(t.charCodeAt(e));e++);return e}function T(t,e){if(C(w(t,(e+=2)-1))){for(const n=Math.min(t.length,e+5);e<n&&C(w(t,e));e++);const n=w(t,e);x(n)&&(e+=A(t,e,n))}return e}var I={consumeEscaped:T,consumeName:function(t,e){for(;e<t.length;e++){const n=t.charCodeAt(e);if(!v(n)){if(!L(n,w(t,e+1)))break;e=T(t,e)-1}}return e},consumeNumber:function(t,e){let n=t.charCodeAt(e);if(43!==n&&45!==n||(n=t.charCodeAt(e+=1)),y(n)&&(e=D(t,e+1),n=t.charCodeAt(e)),46===n&&y(t.charCodeAt(e+1))&&(n=t.charCodeAt(e+=2),e=D(t,e)),P(t,e,101)){let i=0;n=t.charCodeAt(e+1),45!==n&&43!==n||(i=1,n=t.charCodeAt(e+2)),y(n)&&(e=D(t,e+1+i+1))}return e},consumeBadUrlRemnants:function(t,e){for(;e<t.length;e++){const n=t.charCodeAt(e);if(41===n){e++;break}L(n,w(t,e+1))&&(e=T(t,e))}return e},cmpChar:P,cmpStr:function(t,e,n,i){if(n-e!==i.length)return!1;if(e<0||n>t.length)return!1;for(let r=e;r<n;r++){const n=i.charCodeAt(r-e);let s=t.charCodeAt(r);if(b(s)&&(s|=32),s!==n)return!1}return!0},getNewlineLength:A,findWhiteSpaceStart:function(t,e){for(;e>=0&&x(t.charCodeAt(e));e--);return e+1},findWhiteSpaceEnd:function(t,e){for(;e<t.length&&x(t.charCodeAt(e));e++);return e}},O={EOF:0,Ident:1,Function:2,AtKeyword:3,Hash:4,String:5,BadString:6,Url:7,BadUrl:8,Delim:9,Number:10,Percentage:11,Dimension:12,WhiteSpace:13,CDO:14,CDC:15,Colon:16,Semicolon:17,Comma:18,LeftSquareBracket:19,RightSquareBracket:20,LeftParenthesis:21,RightParenthesis:22,LeftCurlyBracket:23,RightCurlyBracket:24,Comment:25},N=Object.keys(O);const{cmpStr:R}=I,{WhiteSpace:B,Comment:E,Delim:_,EOF:M,Function:F,LeftParenthesis:W,RightParenthesis:U,LeftSquareBracket:j,RightSquareBracket:V,LeftCurlyBracket:z,RightCurlyBracket:q}=O,H=new Map([[F,U],[W,U],[j,V],[z,q]]);var Q=class{constructor(t,e){this.setSource(t,e)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(t="",e=(()=>{})){const n=(t=String(t||"")).length,i=s(this.offsetAndType,t.length+1),r=s(this.balance,t.length+1);let o=0,a=0,c=0,l=-1;for(this.offsetAndType=null,this.balance=null,e(t,(t,e,s)=>{switch(t){default:r[o]=n;break;case a:{let t=16777215&c;for(c=r[t],a=c>>24,r[o]=t,r[t++]=o;t<o;t++)r[t]===n&&(r[t]=o);break}case W:case F:case j:case z:r[o]=c,a=H.get(t),c=a<<24|o}i[o++]=t<<24|s,-1===l&&(l=e)}),i[o]=M<<24|n,r[o]=n,r[n]=n;0!==c;){const t=16777215&c;c=r[t],r[t]=n}this.source=t,this.firstCharOffset=-1===l?0:l,this.tokenCount=o,this.offsetAndType=i,this.balance=r,this.reset(),this.next()}lookupType(t){return(t+=this.tokenIndex)<this.tokenCount?this.offsetAndType[t]>>24:M}lookupOffset(t){return(t+=this.tokenIndex)<this.tokenCount?16777215&this.offsetAndType[t-1]:this.source.length}lookupValue(t,e){return(t+=this.tokenIndex)<this.tokenCount&&R(this.source,16777215&this.offsetAndType[t-1],16777215&this.offsetAndType[t],e)}getTokenStart(t){return t===this.tokenIndex?this.tokenStart:t>0?t<this.tokenCount?16777215&this.offsetAndType[t-1]:16777215&this.offsetAndType[this.tokenCount]:this.firstCharOffset}substrToCursor(t){return this.source.substring(t,this.tokenStart)}isBalanceEdge(t){return this.balance[this.tokenIndex]<t}isDelim(t,e){return e?this.lookupType(e)===_&&this.source.charCodeAt(this.lookupOffset(e))===t:this.tokenType===_&&this.source.charCodeAt(this.tokenStart)===t}skip(t){let e=this.tokenIndex+t;e<this.tokenCount?(this.tokenIndex=e,this.tokenStart=16777215&this.offsetAndType[e-1],e=this.offsetAndType[e],this.tokenType=e>>24,this.tokenEnd=16777215&e):(this.tokenIndex=this.tokenCount,this.next())}next(){let t=this.tokenIndex+1;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.tokenEnd,t=this.offsetAndType[t],this.tokenType=t>>24,this.tokenEnd=16777215&t):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=M,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===B||this.tokenType===E;)this.next()}skipUntilBalanced(t,e){let n,i,r=t;t:for(;r<this.tokenCount&&(n=this.balance[r],!(n<t));r++)switch(i=r>0?16777215&this.offsetAndType[r-1]:this.firstCharOffset,e(this.source.charCodeAt(i))){case 1:break t;case 2:r++;break t;default:this.balance[n]===r&&(r=n)}this.skip(r-this.tokenIndex)}forEachToken(t){for(let e=0,n=this.firstCharOffset;e<this.tokenCount;e++){const i=n,r=this.offsetAndType[e],s=16777215&r;n=s,t(r>>24,i,s,e)}}dump(){const t=new Array(this.tokenCount);return this.forEachToken((e,n,i,r)=>{t[r]={idx:r,type:N[e],chunk:this.source.substring(n,i),balance:this.balance[r]}}),t}};const{isNewline:G,isName:$,isValidEscape:J,isNumberStart:K,isIdentifierStart:Y,charCodeCategory:Z,isBOM:X}=S,{cmpStr:tt,getNewlineLength:et,findWhiteSpaceEnd:nt,consumeEscaped:it,consumeName:rt,consumeNumber:st,consumeBadUrlRemnants:ot}=I;function at(t,e){function n(e){return e<o?t.charCodeAt(e):0}function i(){return l=st(t,l),Y(n(l),n(l+1),n(l+2))?(a=O.Dimension,void(l=rt(t,l))):37===n(l)?(a=O.Percentage,void l++):void(a=O.Number)}function r(){const e=l;return l=rt(t,l),tt(t,e,l,"url")&&40===n(l)?(l=nt(t,l+1),34===n(l)||39===n(l)?(a=O.Function,void(l=e+4)):void function(){for(a=O.Url,l=nt(t,l);l<t.length;l++){const e=t.charCodeAt(l);switch(Z(e)){case 41:return void l++;case Z.WhiteSpace:return l=nt(t,l),41===n(l)||l>=t.length?void(l<t.length&&l++):(l=ot(t,l),void(a=O.BadUrl));case 34:case 39:case 40:case Z.NonPrintable:return l=ot(t,l),void(a=O.BadUrl);case 92:if(J(e,n(l+1))){l=it(t,l)-1;break}return l=ot(t,l),void(a=O.BadUrl)}}}()):40===n(l)?(a=O.Function,void l++):void(a=O.Ident)}function s(e){for(e||(e=n(l++)),a=O.String;l<t.length;l++){const i=t.charCodeAt(l);switch(Z(i)){case e:return void l++;case Z.WhiteSpace:if(G(i))return l+=et(t,l,i),void(a=O.BadString);break;case 92:if(l===t.length-1)break;const r=n(l+1);G(r)?l+=et(t,l+1,r):J(i,r)&&(l=it(t,l)-1)}}}const o=(t=String(t||"")).length;let a,c=X(n(0)),l=c;for(;l<o;){const o=t.charCodeAt(l);switch(Z(o)){case Z.WhiteSpace:a=O.WhiteSpace,l=nt(t,l+1);break;case 34:s();break;case 35:$(n(l+1))||J(n(l+1),n(l+2))?(a=O.Hash,l=rt(t,l+1)):(a=O.Delim,l++);break;case 39:s();break;case 40:a=O.LeftParenthesis,l++;break;case 41:a=O.RightParenthesis,l++;break;case 43:K(o,n(l+1),n(l+2))?i():(a=O.Delim,l++);break;case 44:a=O.Comma,l++;break;case 45:K(o,n(l+1),n(l+2))?i():45===n(l+1)&&62===n(l+2)?(a=O.CDC,l+=3):Y(o,n(l+1),n(l+2))?r():(a=O.Delim,l++);break;case 46:K(o,n(l+1),n(l+2))?i():(a=O.Delim,l++);break;case 47:42===n(l+1)?(a=O.Comment,l=t.indexOf("*/",l+2),l=-1===l?t.length:l+2):(a=O.Delim,l++);break;case 58:a=O.Colon,l++;break;case 59:a=O.Semicolon,l++;break;case 60:33===n(l+1)&&45===n(l+2)&&45===n(l+3)?(a=O.CDO,l+=4):(a=O.Delim,l++);break;case 64:Y(n(l+1),n(l+2),n(l+3))?(a=O.AtKeyword,l=rt(t,l+1)):(a=O.Delim,l++);break;case 91:a=O.LeftSquareBracket,l++;break;case 92:J(o,n(l+1))?r():(a=O.Delim,l++);break;case 93:a=O.RightSquareBracket,l++;break;case 123:a=O.LeftCurlyBracket,l++;break;case 125:a=O.RightCurlyBracket,l++;break;case Z.Digit:i();break;case Z.NameStart:r();break;default:a=O.Delim,l++}e(a,c,c=l)}}Object.assign(at,{TYPE:O,NAME:N,...S,...I});var ct=at;const{isBOM:lt}=ct;function ht(t){const e=t.source,n=e.length,i=e.length>0?lt(e.charCodeAt(0)):0,r=s(t.lines,n),o=s(t.columns,n);let a=t.startLine,c=t.startColumn;for(let t=i;t<n;t++){const i=e.charCodeAt(t);r[t]=a,o[t]=c++,10!==i&&13!==i&&12!==i||(13===i&&t+1<n&&10===e.charCodeAt(t+1)&&(t++,r[t]=a,o[t]=c),a++,c=1)}r[n]=a,o[n]=c,t.lines=r,t.columns=o,t.computed=!0}const{WhiteSpace:ut,Comment:pt}=O;var ft=function(t){const e=this.createList();let n=!1;const i={recognizer:t};for(;!this.eof;){switch(this.tokenType){case pt:this.next();continue;case ut:n=!0,this.next();continue}let r=t.getNode.call(this,i);if(void 0===r)break;n&&(t.onWhiteSpace&&t.onWhiteSpace.call(this,r,e,i),n=!1),e.push(r)}return n&&t.onWhiteSpace&&t.onWhiteSpace.call(this,null,e,i),e};const{consumeNumber:dt,findWhiteSpaceStart:kt,cmpChar:mt,cmpStr:gt}=I,{WhiteSpace:St,Comment:yt,Ident:Ct,Function:bt,Url:vt,Hash:xt,Percentage:Lt,Number:wt}=O,At=()=>{};function Pt(t){return function(){return this[t]()}}function Dt(t){const e=Object.create(null);for(const n in t){const i=t[n];i.parse&&(e[n]=i.parse)}return e}var Tt=function(t){let n="",i="<unknown>",s=!1,o=At,a=!1;const c=new class{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(t,e=0,n=1,i=1){this.source=t,this.startOffset=e,this.startLine=n,this.startColumn=i,this.computed=!1}getLocation(t,e){return this.computed||ht(this),{source:e,offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}getLocationRange(t,e,n){return this.computed||ht(this),{source:n,start:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]},end:{offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]}}}},l=Object.assign(new Q,function(t){const e={context:Object.create(null),scope:Object.assign(Object.create(null),t.scope),atrule:Dt(t.atrule),pseudo:Dt(t.pseudo),node:Dt(t.node)};for(const n in t.parseContext)switch(typeof t.parseContext[n]){case"function":e.context[n]=t.parseContext[n];break;case"string":e.context[n]=Pt(t.parseContext[n])}return{config:e,...e,...e.node}}(t||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:ft,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket:t=>123===t?1:0,consumeUntilLeftCurlyBracketOrSemicolon:t=>123===t||59===t?1:0,consumeUntilExclamationMarkOrSemicolon:t=>33===t||59===t?1:0,consumeUntilSemicolonIncluded:t=>59===t?2:0,createList:()=>new e,createSingleNodeList:t=>(new e).appendData(t),getFirstListNode:t=>t&&t.first,getLastListNode:t=>t&&t.last,parseWithFallback(t,e){const n=this.tokenIndex;try{return t.call(this)}catch(t){if(a)throw t;const i=e.call(this,n);return a=!0,o(t,i),a=!1,i}},lookupNonWSType(t){let e;do{if(e=this.lookupType(t++),e!==St)return e}while(0!==e);return 0},eat(t){if(this.tokenType!==t){let e=this.tokenStart,n=N[t]+" is expected";switch(t){case Ct:this.tokenType===bt||this.tokenType===vt?(e=this.tokenEnd-1,n="Identifier is expected but function found"):n="Identifier is expected";break;case xt:this.isDelim(35)&&(this.next(),e++,n="Name is expected");break;case Lt:this.tokenType===wt&&(e=this.tokenEnd,n="Percent sign is expected")}this.error(n,e)}this.next()},eatIdent(t){this.tokenType===Ct&&!1!==this.lookupValue(0,t)||this.error(`Identifier "${t}" is expected`),this.next()},eatDelim(t){this.isDelim(t)||this.error(`Delim "${String.fromCharCode(t)}" is expected`),this.next()},charCodeAt:t=>t>=0&&t<n.length?n.charCodeAt(t):0,cmpChar:(t,e)=>mt(n,t,e),cmpStr:(t,e,i)=>gt(n,t,e,i),substring:(t,e)=>n.substring(t,e),consume(t){const e=this.tokenStart;return this.eat(t),this.substrToCursor(e)},consumeFunctionName(){const t=n.substring(this.tokenStart,this.tokenEnd-1);return this.eat(bt),t},consumeNumber(t){const e=n.substring(this.tokenStart,dt(n,this.tokenStart));return this.eat(t),e},getLocation:(t,e)=>s?c.getLocationRange(t,e,i):null,getLocationFromList(t){if(s){const e=this.getFirstListNode(t),n=this.getLastListNode(t);return c.getLocationRange(null!==e?e.loc.start.offset-c.startOffset:this.tokenStart,null!==n?n.loc.end.offset-c.startOffset:this.tokenStart,i)}return null},error(t,e){const i=void 0!==e&&e<n.length?c.getLocation(e):this.eof?c.getLocation(kt(n,n.length-1)):c.getLocation(this.tokenStart);throw new r(t||"Unexpected input",n,i.offset,i.line,i.column)}});return Object.assign((function(t,e){n=t,e=e||{},l.setSource(n,ct),c.setSource(n,e.offset,e.line,e.column),i=e.filename||"<unknown>",s=Boolean(e.positions),o="function"==typeof e.onParseError?e.onParseError:At,a=!1,l.parseAtrulePrelude=!("parseAtrulePrelude"in e)||Boolean(e.parseAtrulePrelude),l.parseRulePrelude=!("parseRulePrelude"in e)||Boolean(e.parseRulePrelude),l.parseValue=!("parseValue"in e)||Boolean(e.parseValue),l.parseCustomProperty="parseCustomProperty"in e&&Boolean(e.parseCustomProperty);const{context:r="default",onComment:h}=e;if(r in l.context==!1)throw new Error("Unknown context `"+r+"`");"function"==typeof h&&l.forEachToken((t,e,i)=>{if(t===yt){const t=l.getLocation(e,i),r=gt(n,i-2,i,"*/")?n.slice(e+2,i-2):n.slice(e+2,i);h(r,t)}});const u=l.context[r].call(l,e);return l.eof||l.error(),u}),{config:l.config})};const{WhiteSpace:It,Delim:Ot,Ident:Nt,Function:Rt,Url:Bt,BadUrl:Et,AtKeyword:_t,Hash:Mt,Percentage:Ft,Dimension:Wt,Number:Ut,String:jt,Colon:Vt,LeftParenthesis:zt,RightParenthesis:qt,CDC:Ht}=O,Qt=(t,e)=>{if(t===Ot&&(t=e),"string"==typeof t){const e=t.charCodeAt(0);return e>127?32768:e<<8}return t},Gt=[[Nt,Nt],[Nt,Rt],[Nt,Bt],[Nt,Et],[Nt,"-"],[Nt,Ut],[Nt,Ft],[Nt,Wt],[Nt,Ht],[Nt,zt],[_t,Nt],[_t,Rt],[_t,Bt],[_t,Et],[_t,"-"],[_t,Ut],[_t,Ft],[_t,Wt],[_t,Ht],[Mt,Nt],[Mt,Rt],[Mt,Bt],[Mt,Et],[Mt,"-"],[Mt,Ut],[Mt,Ft],[Mt,Wt],[Mt,Ht],[Wt,Nt],[Wt,Rt],[Wt,Bt],[Wt,Et],[Wt,"-"],[Wt,Ut],[Wt,Ft],[Wt,Wt],[Wt,Ht],["#",Nt],["#",Rt],["#",Bt],["#",Et],["#","-"],["#",Ut],["#",Ft],["#",Wt],["-",Nt],["-",Rt],["-",Bt],["-",Et],["-","-"],["-",Ut],["-",Ft],["-",Wt],[Ut,Nt],[Ut,Rt],[Ut,Bt],[Ut,Et],[Ut,Ut],[Ut,Ft],[Ut,Wt],["@",Nt],["@",Rt],["@",Bt],["@",Et],["@","-"],[".",Ut],[".",Ft],[".",Wt],["+",Ut],["+",Ft],["+",Wt],["/","*"]],$t=Gt.concat([[_t,zt],[_t,jt],[_t,Vt],[qt,Nt],[qt,Rt],[qt,Bt],[Bt,Nt],[Bt,Rt],[Bt,Bt]]);function Jt(t){const e=new Set(t.map(([t,e])=>Qt(t)<<16|Qt(e)));return function(t,n,i){const r=Qt(n,i),s=i.charCodeAt(0);return(45===s||43===s?e.has(t<<16|s<<8):e.has(t<<16|r))&&this.emit(" ",It),r}}var Kt={spec:Jt(Gt),safe:Jt($t)},Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Zt=function(t){if(0<=t&&t<Yt.length)return Yt[t];throw new TypeError("Must be between 0 and 63: "+t)};var Xt=function(t){var e,n="",i=function(t){return t<0?1+(-t<<1):0+(t<<1)}(t);do{e=31&i,(i>>>=5)>0&&(e|=32),n+=Zt(e)}while(i>0);return n};var te=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){e.getArg=function(t,e,n){if(e in t)return t[e];if(3===arguments.length)return n;throw new Error('"'+e+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function r(t){var e=t.match(n);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function s(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}function o(t){var n=t,i=r(t);if(i){if(!i.path)return t;n=i.path}for(var o,a=e.isAbsolute(n),c=n.split(/\/+/),l=0,h=c.length-1;h>=0;h--)"."===(o=c[h])?c.splice(h,1):".."===o?l++:l>0&&(""===o?(c.splice(h+1,l),l=0):(c.splice(h,2),l--));return""===(n=c.join("/"))&&(n=a?"/":"."),i?(i.path=n,s(i)):n}function a(t,e){""===t&&(t="."),""===e&&(e=".");var n=r(e),a=r(t);if(a&&(t=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),s(n);if(n||e.match(i))return e;if(a&&!a.host&&!a.path)return a.host=e,s(a);var c="/"===e.charAt(0)?e:o(t.replace(/\/+$/,"")+"/"+e);return a?(a.path=c,s(a)):c}e.urlParse=r,e.urlGenerate=s,e.normalize=o,e.join=a,e.isAbsolute=function(t){return"/"===t.charAt(0)||n.test(t)},e.relative=function(t,e){""===t&&(t="."),t=t.replace(/\/$/,"");for(var n=0;0!==e.indexOf(t+"/");){var i=t.lastIndexOf("/");if(i<0)return e;if((t=t.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)};var c=!("__proto__"in Object.create(null));function l(t){return t}function h(t){if(!t)return!1;var e=t.length;if(e<9)return!1;if(95!==t.charCodeAt(e-1)||95!==t.charCodeAt(e-2)||111!==t.charCodeAt(e-3)||116!==t.charCodeAt(e-4)||111!==t.charCodeAt(e-5)||114!==t.charCodeAt(e-6)||112!==t.charCodeAt(e-7)||95!==t.charCodeAt(e-8)||95!==t.charCodeAt(e-9))return!1;for(var n=e-10;n>=0;n--)if(36!==t.charCodeAt(n))return!1;return!0}function u(t,e){return t===e?0:null===t?1:null===e?-1:t>e?1:-1}e.toSetString=c?l:function(t){return h(t)?"$"+t:t},e.fromSetString=c?l:function(t){return h(t)?t.slice(1):t},e.compareByOriginalPositions=function(t,e,n){var i=u(t.source,e.source);return 0!==i||0!==(i=t.originalLine-e.originalLine)||0!==(i=t.originalColumn-e.originalColumn)||n||0!==(i=t.generatedColumn-e.generatedColumn)||0!==(i=t.generatedLine-e.generatedLine)?i:u(t.name,e.name)},e.compareByGeneratedPositionsDeflated=function(t,e,n){var i=t.generatedLine-e.generatedLine;return 0!==i||0!==(i=t.generatedColumn-e.generatedColumn)||n||0!==(i=u(t.source,e.source))||0!==(i=t.originalLine-e.originalLine)||0!==(i=t.originalColumn-e.originalColumn)?i:u(t.name,e.name)},e.compareByGeneratedPositionsInflated=function(t,e){var n=t.generatedLine-e.generatedLine;return 0!==n||0!==(n=t.generatedColumn-e.generatedColumn)||0!==(n=u(t.source,e.source))||0!==(n=t.originalLine-e.originalLine)||0!==(n=t.originalColumn-e.originalColumn)?n:u(t.name,e.name)},e.parseSourceMapInput=function(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(t,e,n){if(e=e||"",t&&("/"!==t[t.length-1]&&"/"!==e[0]&&(t+="/"),e=t+e),n){var i=r(n);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var c=i.path.lastIndexOf("/");c>=0&&(i.path=i.path.substring(0,c+1))}e=a(s(i),e)}return o(e)}})),ee=(te.getArg,te.urlParse,te.urlGenerate,te.normalize,te.join,te.isAbsolute,te.relative,te.toSetString,te.fromSetString,te.compareByOriginalPositions,te.compareByGeneratedPositionsDeflated,te.compareByGeneratedPositionsInflated,te.parseSourceMapInput,te.computeSourceURL,Object.prototype.hasOwnProperty),ne="undefined"!=typeof Map;function ie(){this._array=[],this._set=ne?new Map:Object.create(null)}ie.fromArray=function(t,e){for(var n=new ie,i=0,r=t.length;i<r;i++)n.add(t[i],e);return n},ie.prototype.size=function(){return ne?this._set.size:Object.getOwnPropertyNames(this._set).length},ie.prototype.add=function(t,e){var n=ne?t:te.toSetString(t),i=ne?this.has(t):ee.call(this._set,n),r=this._array.length;i&&!e||this._array.push(t),i||(ne?this._set.set(t,r):this._set[n]=r)},ie.prototype.has=function(t){if(ne)return this._set.has(t);var e=te.toSetString(t);return ee.call(this._set,e)},ie.prototype.indexOf=function(t){if(ne){var e=this._set.get(t);if(e>=0)return e}else{var n=te.toSetString(t);if(ee.call(this._set,n))return this._set[n]}throw new Error('"'+t+'" is not in the set.')},ie.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},ie.prototype.toArray=function(){return this._array.slice()};var re={ArraySet:ie};function se(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}se.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},se.prototype.add=function(t){var e,n,i,r,s,o;e=this._last,n=t,i=e.generatedLine,r=n.generatedLine,s=e.generatedColumn,o=n.generatedColumn,r>i||r==i&&o>=s||te.compareByGeneratedPositionsInflated(e,n)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},se.prototype.toArray=function(){return this._sorted||(this._array.sort(te.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};var oe=re.ArraySet,ae={MappingList:se}.MappingList;function ce(t){t||(t={}),this._file=te.getArg(t,"file",null),this._sourceRoot=te.getArg(t,"sourceRoot",null),this._skipValidation=te.getArg(t,"skipValidation",!1),this._sources=new oe,this._names=new oe,this._mappings=new ae,this._sourcesContents=null}ce.prototype._version=3,ce.fromSourceMap=function(t){var e=t.sourceRoot,n=new ce({file:t.file,sourceRoot:e});return t.eachMapping((function(t){var i={generated:{line:t.generatedLine,column:t.generatedColumn}};null!=t.source&&(i.source=t.source,null!=e&&(i.source=te.relative(e,i.source)),i.original={line:t.originalLine,column:t.originalColumn},null!=t.name&&(i.name=t.name)),n.addMapping(i)})),t.sources.forEach((function(i){var r=i;null!==e&&(r=te.relative(e,i)),n._sources.has(r)||n._sources.add(r);var s=t.sourceContentFor(i);null!=s&&n.setSourceContent(i,s)})),n},ce.prototype.addMapping=function(t){var e=te.getArg(t,"generated"),n=te.getArg(t,"original",null),i=te.getArg(t,"source",null),r=te.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,n,i,r),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=r&&(r=String(r),this._names.has(r)||this._names.add(r)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:r})},ce.prototype.setSourceContent=function(t,e){var n=t;null!=this._sourceRoot&&(n=te.relative(this._sourceRoot,n)),null!=e?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[te.toSetString(n)]=e):this._sourcesContents&&(delete this._sourcesContents[te.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},ce.prototype.applySourceMap=function(t,e,n){var i=e;if(null==e){if(null==t.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=t.file}var r=this._sourceRoot;null!=r&&(i=te.relative(r,i));var s=new oe,o=new oe;this._mappings.unsortedForEach((function(e){if(e.source===i&&null!=e.originalLine){var a=t.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=a.source&&(e.source=a.source,null!=n&&(e.source=te.join(n,e.source)),null!=r&&(e.source=te.relative(r,e.source)),e.originalLine=a.line,e.originalColumn=a.column,null!=a.name&&(e.name=a.name))}var c=e.source;null==c||s.has(c)||s.add(c);var l=e.name;null==l||o.has(l)||o.add(l)}),this),this._sources=s,this._names=o,t.sources.forEach((function(e){var i=t.sourceContentFor(e);null!=i&&(null!=n&&(e=te.join(n,e)),null!=r&&(e=te.relative(r,e)),this.setSourceContent(e,i))}),this)},ce.prototype._validateMapping=function(t,e,n,i){if(e&&"number"!=typeof e.line&&"number"!=typeof e.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0)||e||n||i)&&!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:n,original:e,name:i}))},ce.prototype._serializeMappings=function(){for(var t,e,n,i,r=0,s=1,o=0,a=0,c=0,l=0,h="",u=this._mappings.toArray(),p=0,f=u.length;p<f;p++){if(t="",(e=u[p]).generatedLine!==s)for(r=0;e.generatedLine!==s;)t+=";",s++;else if(p>0){if(!te.compareByGeneratedPositionsInflated(e,u[p-1]))continue;t+=","}t+=Xt(e.generatedColumn-r),r=e.generatedColumn,null!=e.source&&(i=this._sources.indexOf(e.source),t+=Xt(i-l),l=i,t+=Xt(e.originalLine-1-a),a=e.originalLine-1,t+=Xt(e.originalColumn-o),o=e.originalColumn,null!=e.name&&(n=this._names.indexOf(e.name),t+=Xt(n-c),c=n)),h+=t}return h},ce.prototype._generateSourcesContent=function(t,e){return t.map((function(t){if(!this._sourcesContents)return null;null!=e&&(t=te.relative(e,t));var n=te.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},ce.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(t.file=this._file),null!=this._sourceRoot&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},ce.prototype.toString=function(){return JSON.stringify(this.toJSON())};var le={SourceMapGenerator:ce};const{SourceMapGenerator:he}=le,ue=new Set(["Atrule","Selector","Declaration"]);const{Delim:pe,WhiteSpace:fe}=O;function de(t,e){if("function"!=typeof e)t.children.forEach(this.node,this);else{let n=null;t.children.forEach(t=>{null!==n&&e.call(this,n),this.node(t),n=t})}}function ke(t){ct(t,(e,n,i)=>{this.token(e,t.slice(n,i))})}var me=function(t){const e=new Map;for(let n in t.node)e.set(n,t.node[n].generate);return function(t,n){let i="",r=0,s={children:de,node:function(t){if(!e.has(t.type))throw new Error("Unknown node type: "+t.type);e.get(t.type).call(this,t)},tokenize:ke,tokenBefore:Kt.safe,token(t,e){r=this.tokenBefore(r,t,e),this.emit(e,t),t===pe&&92===e.charCodeAt(0)&&this.emit("\n",fe)},emit(t){i+=t},result:()=>i};return n&&("function"==typeof n.decorator&&(s=n.decorator(s)),n.sourceMap&&(s=function(t){const e=new he,n={line:1,column:0},i={line:0,column:0},r={line:1,column:0},s={generated:r};let o=1,a=0,c=!1;const l=t.node;t.node=function(t){if(t.loc&&t.loc.start&&ue.has(t.type)){const l=t.loc.start.line,h=t.loc.start.column-1;i.line===l&&i.column===h||(i.line=l,i.column=h,n.line=o,n.column=a,c&&(c=!1,n.line===r.line&&n.column===r.column||e.addMapping(s)),c=!0,e.addMapping({source:t.loc.source,original:i,generated:n}))}l.call(this,t),c&&ue.has(t.type)&&(r.line=o,r.column=a)};const h=t.emit;t.emit=function(t,e){for(let e=0;e<t.length;e++)10===t.charCodeAt(e)?(o++,a=0):a++;h(t,e)};const u=t.result;return t.result=function(){return c&&e.addMapping(s),{css:u(),map:e}},t}(s)),Kt.hasOwnProperty(n.mode)&&(s.tokenBefore=Kt[n.mode])),s.node(t),s.result()}};const ge=Object.prototype.hasOwnProperty,Se=function(){};function ye(t){return"function"==typeof t?t:Se}function Ce(t,e){return function(n,i,r){n.type===e&&t.call(this,n,i,r)}}function be(t,e){const n=e.structure,i=[];for(const t in n){if(!1===ge.call(n,t))continue;let e=n[t];const r={name:t,type:!1,nullable:!1};Array.isArray(e)||(e=[e]);for(const t of e)null===t?r.nullable=!0:"string"==typeof t?r.type="node":Array.isArray(t)&&(r.type="list");r.type&&i.push(r)}return i.length?{context:e.walkContext,fields:i}:null}function ve(t,e){const n=t.fields.slice(),i=t.context,r="string"==typeof i;return e&&n.reverse(),function(t,s,o){let a;r&&(a=s[i],s[i]=t);for(const i of n){const n=t[i.name];i.nullable&&!n||("list"===i.type?e?n.forEachRight(o):n.forEach(o):o(n))}r&&(s[i]=a)}}function xe(t){return{Atrule:{StyleSheet:t.StyleSheet,Atrule:t.Atrule,Rule:t.Rule,Block:t.Block},Rule:{StyleSheet:t.StyleSheet,Atrule:t.Atrule,Rule:t.Rule,Block:t.Block},Declaration:{StyleSheet:t.StyleSheet,Atrule:t.Atrule,Rule:t.Rule,Block:t.Block,DeclarationList:t.DeclarationList}}}var Le=function(t){const e=function(t){const e={};for(const n in t.node)if(ge.call(t.node,n)){const i=t.node[n];if(!i.structure)throw new Error("Missed `structure` field in `"+n+"` node type definition");e[n]=be(0,i)}return e}(t),n={},i={};for(const t in e)ge.call(e,t)&&null!==e[t]&&(n[t]=ve(e[t],!1),i[t]=ve(e[t],!0));const r=xe(n),s=xe(i),o=function(t,o){let a=Se,c=Se,l=n;const h={root:t,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if("function"==typeof o)a=o;else if(o&&(a=ye(o.enter),c=ye(o.leave),o.reverse&&(l=i),o.visit)){if(r.hasOwnProperty(o.visit))l=o.reverse?s[o.visit]:r[o.visit];else if(!e.hasOwnProperty(o.visit))throw new Error("Bad value `"+o.visit+"` for `visit` option (should be: "+Object.keys(e).join(", ")+")");a=Ce(a,o.visit),c=Ce(c,o.visit)}if(a===Se&&c===Se)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");o.reverse&&([c,a]=[a,c]),function t(e,n,i){a.call(h,e,n,i),l.hasOwnProperty(e.type)&&l[e.type](e,h,t),c.call(h,e,n,i)}(t)};return o.find=function(t,e){let n=null;return o(t,(function(t,i,r){null===n&&e.call(this,t,i,r)&&(n=t)})),n},o.findLast=function(t,e){let n=null;return o(t,{reverse:!0,enter:function(t,i,r){null===n&&e.call(this,t,i,r)&&(n=t)}}),n},o.findAll=function(t,e){const n=[];return o(t,(function(t,i,r){e.call(this,t,i,r)&&n.push(t)})),n},o},we=function t(n){const i={};for(const r in n){let s=n[r];s&&(Array.isArray(s)||s instanceof e?s=s.map(t):s.constructor===Object&&(s=t(s))),i[r]=s}return i};const Ae=new Map,Pe=new Map;function De(t,e){return e=e||0,t.length-e>=2&&45===t.charCodeAt(e)&&45===t.charCodeAt(e+1)}function Te(t,e){if(e=e||0,t.length-e>=3&&45===t.charCodeAt(e)&&45!==t.charCodeAt(e+1)){const n=t.indexOf("-",e+2);if(-1!==n)return t.substring(e,n+1)}return""}var Ie={keyword:function(t){if(Ae.has(t))return Ae.get(t);const e=t.toLowerCase();let n=Ae.get(e);if(void 0===n){const t=De(e,0),i=t?"":Te(e,0);n=Object.freeze({basename:e.substr(i.length),name:e,prefix:i,vendor:i,custom:t})}return Ae.set(t,n),n},property:function(t){if(Pe.has(t))return Pe.get(t);let e=t,n=t[0];"/"===n?n="/"===t[1]?"//":"/":"_"!==n&&"*"!==n&&"$"!==n&&"#"!==n&&"+"!==n&&"&"!==n&&(n="");const i=De(e,n.length);if(!i&&(e=e.toLowerCase(),Pe.has(e))){const n=Pe.get(e);return Pe.set(t,n),n}const r=i?"":Te(e,n.length),s=e.substr(0,n.length+r.length),o=Object.freeze({basename:e.substr(s.length),name:e.substr(n.length),hack:n,vendor:r,prefix:s,custom:i});return Pe.set(t,o),o},isCustomProperty:De,vendorPrefix:Te};const Oe=Object.prototype.hasOwnProperty,Ne={generic:!0,types:{},atrules:{},properties:{},parseContext:{},scope:{},atrule:["parse"],pseudo:["parse"],node:["name","structure","parse","generate","walkContext"]};function Re(t){return t&&t.constructor===Object}function Be(t){return Re(t)?{...t}:t}function Ee(t,e){for(const n in e)Oe.call(e,n)&&(Re(t[n])?Ee(t[n],Be(e[n])):t[n]=Be(e[n]))}var _e=(t,e)=>function t(e,n,i){for(const r in i)if(!1!==Oe.call(i,r))if(!0===i[r])r in n&&Oe.call(n,r)&&(e[r]=Be(n[r]));else if(i[r])if(Re(i[r])){const t={};Ee(t,e[r]),Ee(t,n[r]),e[r]=t}else if(Array.isArray(i[r])){const s={},o=i[r].reduce((function(t,e){return t[e]=!0,t}),{});for(const n in e[r])Oe.call(e[r],n)&&(s[n]={},e[r]&&e[r][n]&&t(s[n],e[r][n],o));for(const e in n[r])Oe.call(n[r],e)&&(s[e]||(s[e]={}),n[r]&&n[r][e]&&t(s[e],n[r][e],o));e[r]=s}return e}(t,e,Ne);function Me(t){const n=Tt(t),i=Le(t),s=me(t),{fromPlainObject:o,toPlainObject:a}=function(t){return{fromPlainObject:function(n){return t(n,{enter:function(t){t.children&&t.children instanceof e==!1&&(t.children=(new e).fromArray(t.children))}}),n},toPlainObject:function(n){return t(n,{leave:function(t){t.children&&t.children instanceof e&&(t.children=t.children.toArray())}}),n}}}(i);return{List:e,SyntaxError:r,TokenStream:Q,vendorPrefix:Ie.vendorPrefix,keyword:Ie.keyword,property:Ie.property,isCustomProperty:Ie.isCustomProperty,tokenize:ct,parse:n,walk:i,generate:s,find:i.find,findLast:i.findLast,findAll:i.findAll,clone:we,fromPlainObject:o,toPlainObject:a,createSyntax:function(t){return Me(_e({},t))},fork:function(e){const n=_e({},t);return Me("function"==typeof e?e(n,Object.assign):_e(n,e))}}}var Fe=t=>Me(_e({},t));const{Ident:We,String:Ue,Number:je,Function:Ve,Url:ze,Hash:qe,Dimension:He,Percentage:Qe,LeftParenthesis:Ge,LeftSquareBracket:$e,Comma:Je,Delim:Ke}=O;var Ye=function(t){switch(this.tokenType){case qe:return this.Hash();case Je:return this.Operator();case Ge:return this.Parentheses(this.readSequence,t.recognizer);case $e:return this.Brackets(this.readSequence,t.recognizer);case Ue:return this.String();case He:return this.Dimension();case Qe:return this.Percentage();case je:return this.Number();case Ve:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,t.recognizer);case ze:return this.Url();case We:return this.cmpChar(this.tokenStart,117)&&this.cmpChar(this.tokenStart+1,43)?this.UnicodeRange():this.Identifier();case Ke:{const t=this.charCodeAt(this.tokenStart);if(47===t||42===t||43===t||45===t)return this.Operator();35===t&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}},Ze={getNode:Ye};const{Delim:Xe,Ident:tn,Dimension:en,Percentage:nn,Number:rn,Hash:sn,Colon:on,LeftSquareBracket:an}=O;var cn={onWhiteSpace:function(t,e){null!==e.last&&"Combinator"!==e.last.type&&null!==t&&"Combinator"!==t.type&&e.push({type:"Combinator",loc:null,name:" "})},getNode:function(){switch(this.tokenType){case an:return this.AttributeSelector();case sn:return this.IdSelector();case on:return this.lookupType(1)===on?this.PseudoElementSelector():this.PseudoClassSelector();case tn:return this.TypeSelector();case rn:case nn:return this.Percentage();case en:46===this.charCodeAt(this.tokenStart)&&this.error("Identifier is expected",this.tokenStart+1);break;case Xe:switch(this.charCodeAt(this.tokenStart)){case 43:case 62:case 126:case 47:return this.Combinator();case 46:return this.ClassSelector();case 42:case 124:return this.TypeSelector();case 35:return this.IdSelector()}break}}};const{Comma:ln,WhiteSpace:hn}=O;function un(t){return null!==t&&"Operator"===t.type&&("-"===t.value[t.value.length-1]||"+"===t.value[t.value.length-1])}var pn={AtrulePrelude:Ze,Selector:cn,Value:{getNode:Ye,onWhiteSpace:function(t,e){un(t)&&(t.value=" "+t.value),un(e.last)&&(e.last.value+=" ")},expression:function(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))},var:function(){const t=this.createList();if(this.skipSC(),t.push(this.Identifier()),this.skipSC(),this.tokenType===ln){t.push(this.Operator());const e=this.tokenIndex,n=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if("Value"===n.type&&n.children.isEmpty)for(let t=e-this.tokenIndex;t<=0;t++)if(this.lookupType(t)===hn){n.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}t.push(n)}return t}}};const{String:fn,Ident:dn,Url:kn,Function:mn,LeftParenthesis:gn}=O;var Sn={parse:{prelude:function(){const t=this.createList();switch(this.skipSC(),this.tokenType){case fn:t.push(this.String());break;case kn:case mn:t.push(this.Url());break;default:this.error("String or url() is expected")}return this.lookupNonWSType(0)!==dn&&this.lookupNonWSType(0)!==gn||t.push(this.MediaQueryList()),t},block:null}};const{WhiteSpace:yn,Comment:Cn,Ident:bn,Function:vn,Colon:xn,LeftParenthesis:Ln}=O;function wn(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function An(){return this.skipSC(),this.tokenType===bn&&this.lookupNonWSType(1)===xn?this.createSingleNodeList(this.Declaration()):Pn.call(this)}function Pn(){const t=this.createList();let e;this.skipSC();t:for(;!this.eof;){switch(this.tokenType){case Cn:case yn:this.next();continue;case vn:e=this.Function(wn,this.scope.AtrulePrelude);break;case bn:e=this.Identifier();break;case Ln:e=this.Parentheses(An,this.scope.AtrulePrelude);break;default:break t}t.push(e)}return t}var Dn={"font-face":{parse:{prelude:null,block:function(){return this.Block(!0)}}},import:Sn,media:{parse:{prelude:function(){return this.createSingleNodeList(this.MediaQueryList())},block:function(){return this.Block(!1)}}},page:{parse:{prelude:function(){return this.createSingleNodeList(this.SelectorList())},block:function(){return this.Block(!0)}}},supports:{parse:{prelude:function(){const t=Pn.call(this);return null===this.getFirstListNode(t)&&this.error("Condition is expected"),t},block:function(){return this.Block(!1)}}}},Tn={parse:function(){return this.createSingleNodeList(this.SelectorList())}};var In={parse:function(){return this.createSingleNodeList(this.Nth(!0))}};var On={parse:function(){return this.createSingleNodeList(this.Nth(!1))}},Nn={dir:{parse:function(){return this.createSingleNodeList(this.Identifier())}},has:{parse:function(){return this.createSingleNodeList(this.SelectorList())}},lang:{parse:function(){return this.createSingleNodeList(this.Identifier())}},matches:Tn,not:Tn,"nth-child":In,"nth-last-child":In,"nth-last-of-type":On,"nth-of-type":On,slotted:{parse:function(){return this.createSingleNodeList(this.Selector())}}};const{isDigit:Rn}=ct,{WhiteSpace:Bn,Comment:En,Ident:_n,Number:Mn,Dimension:Fn}=O;function Wn(t,e){let n=this.tokenStart+t;const i=this.charCodeAt(n);for(43!==i&&45!==i||(e&&this.error("Number sign is not allowed"),n++);n<this.tokenEnd;n++)Rn(this.charCodeAt(n))||this.error("Integer is expected",n)}function Un(t){return Wn.call(this,0,t)}function jn(t,e){if(!this.cmpChar(this.tokenStart+t,e)){let n="";switch(e){case 110:n="N is expected";break;case 45:n="HyphenMinus is expected"}this.error(n,this.tokenStart+t)}}function Vn(){let t=0,e=0,n=this.tokenType;for(;n===Bn||n===En;)n=this.lookupType(++t);if(n!==Mn){if(!this.isDelim(43,t)&&!this.isDelim(45,t))return null;e=this.isDelim(43,t)?43:45;do{n=this.lookupType(++t)}while(n===Bn||n===En);n!==Mn&&(this.skip(t),Un.call(this,!0))}return t>0&&this.skip(t),0===e&&(n=this.charCodeAt(this.tokenStart),43!==n&&45!==n&&this.error("Number sign is expected")),Un.call(this,0!==e),45===e?"-"+this.consume(Mn):this.consume(Mn)}var zn={name:"AnPlusB",structure:{a:[String,null],b:[String,null]},parse:function(){const t=this.tokenStart;let e=null,n=null;if(this.tokenType===Mn)Un.call(this,!1),n=this.consume(Mn);else if(this.tokenType===_n&&this.cmpChar(this.tokenStart,45))switch(e="-1",jn.call(this,1,110),this.tokenEnd-this.tokenStart){case 2:this.next(),n=Vn.call(this);break;case 3:jn.call(this,2,45),this.next(),this.skipSC(),Un.call(this,!0),n="-"+this.consume(Mn);break;default:jn.call(this,2,45),Wn.call(this,3,!0),this.next(),n=this.substrToCursor(t+2)}else if(this.tokenType===_n||this.isDelim(43)&&this.lookupType(1)===_n){let i=0;switch(e="1",this.isDelim(43)&&(i=1,this.next()),jn.call(this,0,110),this.tokenEnd-this.tokenStart){case 1:this.next(),n=Vn.call(this);break;case 2:jn.call(this,1,45),this.next(),this.skipSC(),Un.call(this,!0),n="-"+this.consume(Mn);break;default:jn.call(this,1,45),Wn.call(this,2,!0),this.next(),n=this.substrToCursor(t+i+1)}}else if(this.tokenType===Fn){const i=this.charCodeAt(this.tokenStart),r=43===i||45===i;let s=this.tokenStart+r;for(;s<this.tokenEnd&&Rn(this.charCodeAt(s));s++);s===this.tokenStart+r&&this.error("Integer is expected",this.tokenStart+r),jn.call(this,s-this.tokenStart,110),e=this.substring(t,s),s+1===this.tokenEnd?(this.next(),n=Vn.call(this)):(jn.call(this,s-this.tokenStart+1,45),s+2===this.tokenEnd?(this.next(),this.skipSC(),Un.call(this,!0),n="-"+this.consume(Mn)):(Wn.call(this,s-this.tokenStart+2,!0),this.next(),n=this.substrToCursor(s+1)))}else this.error();return null!==e&&43===e.charCodeAt(0)&&(e=e.substr(1)),null!==n&&43===n.charCodeAt(0)&&(n=n.substr(1)),{type:"AnPlusB",loc:this.getLocation(t,this.tokenStart),a:e,b:n}},generate:function(t){if(t.a){const e=("+1"===t.a||"1"===t.a?"n":"-1"===t.a&&"-n")||t.a+"n";if(t.b){const n="-"===t.b[0]||"+"===t.b[0]?t.b:"+"+t.b;this.tokenize(e+n)}else this.tokenize(e)}else this.tokenize(t.b)}};const{AtKeyword:qn,Semicolon:Hn,LeftCurlyBracket:Qn,RightCurlyBracket:Gn}=O;function $n(t){return this.Raw(t,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function Jn(){for(let t,e=1;t=this.lookupType(e);e++){if(t===Gn)return!0;if(t===Qn||t===qn)return!1}return!1}var Kn={name:"Atrule",structure:{name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]},parse:function(){const t=this.tokenStart;let e,n,i=null,r=null;switch(this.eat(qn),e=this.substrToCursor(t+1),n=e.toLowerCase(),this.skipSC(),!1===this.eof&&this.tokenType!==Qn&&this.tokenType!==Hn&&(i=this.parseAtrulePrelude?this.parseWithFallback(this.AtrulePrelude.bind(this,e),$n):$n.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case Hn:this.next();break;case Qn:r=hasOwnProperty.call(this.atrule,n)&&"function"==typeof this.atrule[n].block?this.atrule[n].block.call(this):this.Block(Jn.call(this))}return{type:"Atrule",loc:this.getLocation(t,this.tokenStart),name:e,prelude:i,block:r}},generate:function(t){this.token(qn,"@"+t.name),null!==t.prelude&&this.node(t.prelude),t.block?this.node(t.block):this.token(Hn,";")},walkContext:"atrule"};const{Semicolon:Yn,LeftCurlyBracket:Zn}=O;var Xn={name:"AtrulePrelude",structure:{children:[[]]},parse:function(t){let e=null;return null!==t&&(t=t.toLowerCase()),this.skipSC(),e=hasOwnProperty.call(this.atrule,t)&&"function"==typeof this.atrule[t].prelude?this.atrule[t].prelude.call(this):this.readSequence(this.scope.AtrulePrelude),this.skipSC(),!0!==this.eof&&this.tokenType!==Zn&&this.tokenType!==Yn&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(e),children:e}},generate:function(t){this.children(t)},walkContext:"atrulePrelude"};const{Ident:ti,String:ei,Delim:ni,Colon:ii,LeftSquareBracket:ri,RightSquareBracket:si}=O;function oi(){this.eof&&this.error("Unexpected end of input");const t=this.tokenStart;let e=!1,n=!0;return this.isDelim(42)?(e=!0,n=!1,this.next()):this.isDelim(124)||this.eat(ti),this.isDelim(124)?61!==this.charCodeAt(this.tokenStart+1)?(this.next(),this.eat(ti)):e&&this.error("Identifier is expected",this.tokenEnd):e&&this.error("Vertical line is expected"),n&&this.tokenType===ii&&(this.next(),this.eat(ti)),{type:"Identifier",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t)}}function ai(){const t=this.tokenStart,e=this.charCodeAt(t);return 61!==e&&126!==e&&94!==e&&36!==e&&42!==e&&124!==e&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),61!==e&&(this.isDelim(61)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(t)}var ci={name:"AttributeSelector",structure:{name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]},parse:function(){const t=this.tokenStart;let e,n=null,i=null,r=null;return this.eat(ri),this.skipSC(),e=oi.call(this),this.skipSC(),this.tokenType!==si&&(this.tokenType!==ti&&(n=ai.call(this),this.skipSC(),i=this.tokenType===ei?this.String():this.Identifier(),this.skipSC()),this.tokenType===ti&&(r=this.consume(ti),this.skipSC())),this.eat(si),{type:"AttributeSelector",loc:this.getLocation(t,this.tokenStart),name:e,matcher:n,value:i,flags:r}},generate:function(t){this.token(ni,"["),this.node(t.name),null!==t.matcher&&(this.tokenize(t.matcher),this.node(t.value)),null!==t.flags&&this.token(ti,t.flags),this.token(ni,"]")}};const{WhiteSpace:li,Comment:hi,Semicolon:ui,AtKeyword:pi,LeftCurlyBracket:fi,RightCurlyBracket:di}=O;function ki(t){return this.Raw(t,null,!0)}function mi(){return this.parseWithFallback(this.Rule,ki)}function gi(t){return this.Raw(t,this.consumeUntilSemicolonIncluded,!0)}function Si(){if(this.tokenType===ui)return gi.call(this,this.tokenIndex);const t=this.parseWithFallback(this.Declaration,gi);return this.tokenType===ui&&this.next(),t}var yi={name:"Block",structure:{children:[["Atrule","Rule","Declaration"]]},parse:function(t){const e=t?Si:mi,n=this.tokenStart;let i=this.createList();this.eat(fi);t:for(;!this.eof;)switch(this.tokenType){case di:break t;case li:case hi:this.next();break;case pi:i.push(this.parseWithFallback(this.Atrule,ki));break;default:i.push(e.call(this))}return this.eof||this.eat(di),{type:"Block",loc:this.getLocation(n,this.tokenStart),children:i}},generate:function(t){this.token(fi,"{"),this.children(t,t=>{"Declaration"===t.type&&this.token(ui,";")}),this.token(di,"}")},walkContext:"block"};const{Delim:Ci,LeftSquareBracket:bi,RightSquareBracket:vi}=O;var xi={name:"Brackets",structure:{children:[[]]},parse:function(t,e){const n=this.tokenStart;let i=null;return this.eat(bi),i=t.call(this,e),this.eof||this.eat(vi),{type:"Brackets",loc:this.getLocation(n,this.tokenStart),children:i}},generate:function(t){this.token(Ci,"["),this.children(t),this.token(Ci,"]")}};const{CDC:Li}=O;var wi={name:"CDC",structure:[],parse:function(){const t=this.tokenStart;return this.eat(Li),{type:"CDC",loc:this.getLocation(t,this.tokenStart)}},generate:function(){this.token(Li,"--\x3e")}};const{CDO:Ai}=O;var Pi={name:"CDO",structure:[],parse:function(){const t=this.tokenStart;return this.eat(Ai),{type:"CDO",loc:this.getLocation(t,this.tokenStart)}},generate:function(){this.token(Ai,"\x3c!--")}};const{Delim:Di,Ident:Ti}=O;var Ii={name:"ClassSelector",structure:{name:String},parse:function(){return this.eatDelim(46),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(Ti)}},generate:function(t){this.token(Di,"."),this.token(Ti,t.name)}};const{WhiteSpace:Oi,Delim:Ni}=O;var Ri={name:"Combinator",structure:{name:String},parse:function(){const t=this.tokenStart;let e;switch(this.tokenType){case Oi:e=" ";break;case Ni:switch(this.charCodeAt(this.tokenStart)){case 62:case 43:case 126:this.next();break;case 47:this.next(),this.eatIdent("deep"),this.eatDelim(47);break;default:this.error("Combinator is expected")}e=this.substrToCursor(t)}return{type:"Combinator",loc:this.getLocation(t,this.tokenStart),name:e}},generate:function(t){this.tokenize(t.name)}};const{Comment:Bi}=O;var Ei={name:"Comment",structure:{value:String},parse:function(){const t=this.tokenStart;let e=this.tokenEnd;return this.eat(Bi),e-t+2>=2&&42===this.charCodeAt(e-2)&&47===this.charCodeAt(e-1)&&(e-=2),{type:"Comment",loc:this.getLocation(t,this.tokenStart),value:this.substring(t+2,e)}},generate:function(t){this.token(Bi,"/*"+t.value+"*/")}};const{isCustomProperty:_i}=Ie,{Ident:Mi,Hash:Fi,Colon:Wi,Semicolon:Ui,Delim:ji,WhiteSpace:Vi}=O;function zi(t){return this.Raw(t,this.consumeUntilExclamationMarkOrSemicolon,!0)}function qi(t){return this.Raw(t,this.consumeUntilExclamationMarkOrSemicolon,!1)}function Hi(){const t=this.tokenIndex,e=this.Value();return"Raw"!==e.type&&!1===this.eof&&this.tokenType!==Ui&&!1===this.isDelim(33)&&!1===this.isBalanceEdge(t)&&this.error(),e}var Qi={name:"Declaration",structure:{important:[Boolean,String],property:String,value:["Value","Raw"]},parse:function(){const t=this.tokenStart,e=this.tokenIndex,n=Gi.call(this),i=_i(n),r=i?this.parseCustomProperty:this.parseValue,s=i?qi:zi;let o,a=!1;this.skipSC(),this.eat(Wi);const c=this.tokenIndex;if(i||this.skipSC(),o=r?this.parseWithFallback(Hi,s):s.call(this,this.tokenIndex),i&&"Value"===o.type&&o.children.isEmpty)for(let t=c-this.tokenIndex;t<=0;t++)if(this.lookupType(t)===Vi){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}return this.isDelim(33)&&(a=$i.call(this),this.skipSC()),!1===this.eof&&this.tokenType!==Ui&&!1===this.isBalanceEdge(e)&&this.error(),{type:"Declaration",loc:this.getLocation(t,this.tokenStart),important:a,property:n,value:o}},generate:function(t){this.token(Mi,t.property),this.token(Wi,":"),this.node(t.value),t.important&&(this.token(ji,"!"),this.token(Mi,!0===t.important?"important":t.important))},walkContext:"declaration"};function Gi(){const t=this.tokenStart;if(this.tokenType===ji)switch(this.charCodeAt(this.tokenStart)){case 42:case 36:case 43:case 35:case 38:this.next();break;case 47:this.next(),this.isDelim(47)&&this.next()}return this.tokenType===Fi?this.eat(Fi):this.eat(Mi),this.substrToCursor(t)}function $i(){this.eat(ji),this.skipSC();const t=this.consume(Mi);return"important"===t||t}const{WhiteSpace:Ji,Comment:Ki,Semicolon:Yi}=O;function Zi(t){return this.Raw(t,this.consumeUntilSemicolonIncluded,!0)}var Xi={name:"DeclarationList",structure:{children:[["Declaration"]]},parse:function(){const t=this.createList();for(;!this.eof;)switch(this.tokenType){case Ji:case Ki:case Yi:this.next();break;default:t.push(this.parseWithFallback(this.Declaration,Zi))}return{type:"DeclarationList",loc:this.getLocationFromList(t),children:t}},generate:function(t){this.children(t,t=>{"Declaration"===t.type&&this.token(Yi,";")})}};const{Dimension:tr}=O;var er={name:"Dimension",structure:{value:String,unit:String},parse:function(){const t=this.tokenStart,e=this.consumeNumber(tr);return{type:"Dimension",loc:this.getLocation(t,this.tokenStart),value:e,unit:this.substring(t+e.length,this.tokenStart)}},generate:function(t){this.token(tr,t.value+t.unit)}};const{Function:nr,RightParenthesis:ir}=O;var rr={name:"Function",structure:{name:String,children:[[]]},parse:function(t,e){const n=this.tokenStart,i=this.consumeFunctionName(),r=i.toLowerCase();let s;return s=e.hasOwnProperty(r)?e[r].call(this,e):t.call(this,e),this.eof||this.eat(ir),{type:"Function",loc:this.getLocation(n,this.tokenStart),name:i,children:s}},generate:function(t){this.token(nr,t.name+"("),this.children(t),this.token(ir,")")},walkContext:"function"};const{Hash:sr}=O;var or={name:"Hash",structure:{value:String},parse:function(){const t=this.tokenStart;return this.eat(sr),{type:"Hash",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t+1)}},generate:function(t){this.token(sr,"#"+t.value)}};const{Ident:ar}=O;var cr={name:"Identifier",structure:{name:String},parse:function(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(ar)}},generate:function(t){this.token(ar,t.name)}};const{Hash:lr}=O;var hr={name:"IdSelector",structure:{name:String},parse:function(){const t=this.tokenStart;return this.eat(lr),{type:"IdSelector",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t+1)}},generate:function(t){this.token(lr,"#"+t.name)}};const{Ident:ur,Number:pr,Dimension:fr,LeftParenthesis:dr,RightParenthesis:kr,Colon:mr,Delim:gr}=O;var Sr={name:"MediaFeature",structure:{name:String,value:["Identifier","Number","Dimension","Ratio",null]},parse:function(){const t=this.tokenStart;let e,n=null;if(this.eat(dr),this.skipSC(),e=this.consume(ur),this.skipSC(),this.tokenType!==kr){switch(this.eat(mr),this.skipSC(),this.tokenType){case pr:n=this.lookupNonWSType(1)===gr?this.Ratio():this.Number();break;case fr:n=this.Dimension();break;case ur:n=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(kr),{type:"MediaFeature",loc:this.getLocation(t,this.tokenStart),name:e,value:n}},generate:function(t){this.token(dr,"("),this.token(ur,t.name),null!==t.value&&(this.token(mr,":"),this.node(t.value)),this.token(kr,")")}};const{WhiteSpace:yr,Comment:Cr,Ident:br,LeftParenthesis:vr}=O;var xr={name:"MediaQuery",structure:{children:[["Identifier","MediaFeature","WhiteSpace"]]},parse:function(){const t=this.createList();let e=null;this.skipSC();t:for(;!this.eof;){switch(this.tokenType){case Cr:case yr:this.next();continue;case br:e=this.Identifier();break;case vr:e=this.MediaFeature();break;default:break t}t.push(e)}return null===e&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(t),children:t}},generate:function(t){this.children(t)}};const{Comma:Lr}=O;var wr={name:"MediaQueryList",structure:{children:[["MediaQuery"]]},parse:function(t){const e=this.createList();for(this.skipSC();!this.eof&&(e.push(this.MediaQuery(t)),this.tokenType===Lr);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(e),children:e}},generate:function(t){this.children(t,()=>this.token(Lr,","))}};const{Ident:Ar}=O;var Pr={name:"Nth",structure:{nth:["AnPlusB","Identifier"],selector:["SelectorList",null]},parse:function(t){this.skipSC();const e=this.tokenStart;let n,i=e,r=null;return n=this.lookupValue(0,"odd")||this.lookupValue(0,"even")?this.Identifier():this.AnPlusB(),i=this.tokenStart,this.skipSC(),t&&this.lookupValue(0,"of")&&(this.next(),r=this.SelectorList(),i=this.tokenStart),{type:"Nth",loc:this.getLocation(e,i),nth:n,selector:r}},generate:function(t){this.node(t.nth),null!==t.selector&&(this.token(Ar,"of"),this.node(t.selector))}};const{Number:Dr}=O;var Tr={name:"Number",structure:{value:String},parse:function(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(Dr)}},generate:function(t){this.token(Dr,t.value)}},Ir={name:"Operator",structure:{value:String},parse:function(){const t=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t)}},generate:function(t){this.tokenize(t.value)}};const{LeftParenthesis:Or,RightParenthesis:Nr}=O;var Rr={name:"Parentheses",structure:{children:[[]]},parse:function(t,e){const n=this.tokenStart;let i=null;return this.eat(Or),i=t.call(this,e),this.eof||this.eat(Nr),{type:"Parentheses",loc:this.getLocation(n,this.tokenStart),children:i}},generate:function(t){this.token(Or,"("),this.children(t),this.token(Nr,")")}};const{Percentage:Br}=O;var Er={name:"Percentage",structure:{value:String},parse:function(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(Br)}},generate:function(t){this.token(Br,t.value+"%")}};const{Ident:_r,Function:Mr,Colon:Fr,RightParenthesis:Wr}=O;var Ur={name:"PseudoClassSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){const t=this.tokenStart;let e,n,i=null;return this.eat(Fr),this.tokenType===Mr?(e=this.consumeFunctionName(),n=e.toLowerCase(),hasOwnProperty.call(this.pseudo,n)?(this.skipSC(),i=this.pseudo[n].call(this),this.skipSC()):(i=this.createList(),i.push(this.Raw(this.tokenIndex,null,!1))),this.eat(Wr)):e=this.consume(_r),{type:"PseudoClassSelector",loc:this.getLocation(t,this.tokenStart),name:e,children:i}},generate:function(t){this.token(Fr,":"),null===t.children?this.token(_r,t.name):(this.token(Mr,t.name+"("),this.children(t),this.token(Wr,")"))},walkContext:"function"};const{Ident:jr,Function:Vr,Colon:zr,RightParenthesis:qr}=O;var Hr={name:"PseudoElementSelector",structure:{name:String,children:[["Raw"],null]},parse:function(){const t=this.tokenStart;let e,n,i=null;return this.eat(zr),this.eat(zr),this.tokenType===Vr?(e=this.consumeFunctionName(),n=e.toLowerCase(),hasOwnProperty.call(this.pseudo,n)?(this.skipSC(),i=this.pseudo[n].call(this),this.skipSC()):(i=this.createList(),i.push(this.Raw(this.tokenIndex,null,!1))),this.eat(qr)):e=this.consume(jr),{type:"PseudoElementSelector",loc:this.getLocation(t,this.tokenStart),name:e,children:i}},generate:function(t){this.token(zr,":"),this.token(zr,":"),null===t.children?this.token(jr,t.name):(this.token(Vr,t.name+"("),this.children(t),this.token(qr,")"))},walkContext:"function"};const{isDigit:Qr}=ct,{Delim:Gr,Number:$r}=O;function Jr(){this.skipSC();const t=this.consume($r);for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);Qr(n)||46===n||this.error("Unsigned number is expected",this.tokenStart-t.length+e)}return 0===Number(t)&&this.error("Zero number is not allowed",this.tokenStart-t.length),t}var Kr={name:"Ratio",structure:{left:String,right:String},parse:function(){const t=this.tokenStart,e=Jr.call(this);let n;return this.skipSC(),this.eatDelim(47),n=Jr.call(this),{type:"Ratio",loc:this.getLocation(t,this.tokenStart),left:e,right:n}},generate:function(t){this.token($r,t.left),this.token(Gr,"/"),this.token($r,t.right)}};const{WhiteSpace:Yr}=O;function Zr(){return this.tokenIndex>0&&this.lookupType(-1)===Yr?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}var Xr={name:"Raw",structure:{value:String},parse:function(t,e,n){const i=this.getTokenStart(t);let r;return this.skipUntilBalanced(t,e||this.consumeUntilBalanceEnd),r=n&&this.tokenStart>i?Zr.call(this):this.tokenStart,{type:"Raw",loc:this.getLocation(i,r),value:this.substring(i,r)}},generate:function(t){this.tokenize(t.value)}};const{LeftCurlyBracket:ts}=O;function es(t){return this.Raw(t,this.consumeUntilLeftCurlyBracket,!0)}function ns(){const t=this.SelectorList();return"Raw"!==t.type&&!1===this.eof&&this.tokenType!==ts&&this.error(),t}var is={name:"Rule",structure:{prelude:["SelectorList","Raw"],block:["Block"]},parse:function(){const t=this.tokenIndex,e=this.tokenStart;let n,i;return n=this.parseRulePrelude?this.parseWithFallback(ns,es):es.call(this,t),i=this.Block(!0),{type:"Rule",loc:this.getLocation(e,this.tokenStart),prelude:n,block:i}},generate:function(t){this.node(t.prelude),this.node(t.block)},walkContext:"rule"};const{Comma:rs}=O;var ss={name:"SelectorList",structure:{children:[["Selector","Raw"]]},parse:function(){const t=this.createList();for(;!this.eof&&(t.push(this.Selector()),this.tokenType===rs);)this.next();return{type:"SelectorList",loc:this.getLocationFromList(t),children:t}},generate:function(t){this.children(t,()=>this.token(rs,","))},walkContext:"selector"};const{String:os}=O;var as={name:"String",structure:{value:String},parse:function(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(os)}},generate:function(t){this.token(os,t.value)}};const{WhiteSpace:cs,Comment:ls,AtKeyword:hs,CDO:us,CDC:ps}=O;function fs(t){return this.Raw(t,null,!1)}var ds={name:"StyleSheet",structure:{children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]},parse:function(){const t=this.tokenStart,e=this.createList();let n;for(;!this.eof;){switch(this.tokenType){case cs:this.next();continue;case ls:if(33!==this.charCodeAt(this.tokenStart+2)){this.next();continue}n=this.Comment();break;case us:n=this.CDO();break;case ps:n=this.CDC();break;case hs:n=this.parseWithFallback(this.Atrule,fs);break;default:n=this.parseWithFallback(this.Rule,fs)}e.push(n)}return{type:"StyleSheet",loc:this.getLocation(t,this.tokenStart),children:e}},generate:function(t){this.children(t)},walkContext:"stylesheet"};const{Ident:ks}=O;function ms(){this.tokenType!==ks&&!1===this.isDelim(42)&&this.error("Identifier or asterisk is expected"),this.next()}var gs={name:"TypeSelector",structure:{name:String},parse:function(){const t=this.tokenStart;return this.isDelim(124)?(this.next(),ms.call(this)):(ms.call(this),this.isDelim(124)&&(this.next(),ms.call(this))),{type:"TypeSelector",loc:this.getLocation(t,this.tokenStart),name:this.substrToCursor(t)}},generate:function(t){this.tokenize(t.name)}};const{isHexDigit:Ss}=ct,{Ident:ys,Number:Cs,Dimension:bs}=O;function vs(t,e){let n=0;for(let i=this.tokenStart+t;i<this.tokenEnd;i++){const r=this.charCodeAt(i);if(45===r&&e&&0!==n)return vs.call(this,t+n+1,!1),-1;Ss(r)||this.error(e&&0!==n?"Hyphen minus"+(n<6?" or hex digit":"")+" is expected":n<6?"Hex digit is expected":"Unexpected input",i),++n>6&&this.error("Too many hex digits",i)}return this.next(),n}function xs(t){let e=0;for(;this.isDelim(63);)++e>t&&this.error("Too many question marks"),this.next()}function Ls(t){this.charCodeAt(this.tokenStart)!==t&&this.error((43===t?"Plus sign":"Hyphen minus")+" is expected")}function ws(){let t=0;switch(this.tokenType){case Cs:if(t=vs.call(this,1,!0),this.isDelim(63)){xs.call(this,6-t);break}if(this.tokenType===bs||this.tokenType===Cs){Ls.call(this,45),vs.call(this,1,!1);break}break;case bs:t=vs.call(this,1,!0),t>0&&xs.call(this,6-t);break;default:if(this.eatDelim(43),this.tokenType===ys){t=vs.call(this,0,!0),t>0&&xs.call(this,6-t);break}if(this.isDelim(63)){this.next(),xs.call(this,5);break}this.error("Hex digit or question mark is expected")}}var As={name:"UnicodeRange",structure:{value:String},parse:function(){const t=this.tokenStart;return this.eatIdent("u"),ws.call(this),{type:"UnicodeRange",loc:this.getLocation(t,this.tokenStart),value:this.substrToCursor(t)}},generate:function(t){this.tokenize(t.value)}};const{isWhiteSpace:Ps}=ct,{Function:Ds,Url:Ts,RightParenthesis:Is}=O;var Os={name:"Url",structure:{value:["String","Raw"]},parse:function(){const t=this.tokenStart;let e;switch(this.tokenType){case Ts:let n=t+4,i=this.tokenEnd-1;for(;n<i&&Ps(this.charCodeAt(n));)n++;for(;n<i&&Ps(this.charCodeAt(i-1));)i--;e={type:"Raw",loc:this.getLocation(n,i),value:this.substring(n,i)},this.eat(Ts);break;case Ds:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(Ds),this.skipSC(),e=this.String(),this.skipSC(),this.eat(Is);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(t,this.tokenStart),value:e}},generate:function(t){"Raw"===t.value.type?this.token(Ts,"url("+t.value.value+")"):(this.token(Ds,"url("),this.node(t.value),this.token(Is,")"))}};const{WhiteSpace:Ns}=O,Rs=Object.freeze({type:"WhiteSpace",loc:null,value:" "});var Bs,Es={AnPlusB:zn,Atrule:Kn,AtrulePrelude:Xn,AttributeSelector:ci,Block:yi,Brackets:xi,CDC:wi,CDO:Pi,ClassSelector:Ii,Combinator:Ri,Comment:Ei,Declaration:Qi,DeclarationList:Xi,Dimension:er,Function:rr,Hash:or,Identifier:cr,IdSelector:hr,MediaFeature:Sr,MediaQuery:xr,MediaQueryList:wr,Nth:Pr,Number:Tr,Operator:Ir,Parentheses:Rr,Percentage:Er,PseudoClassSelector:Ur,PseudoElementSelector:Hr,Ratio:Kr,Raw:Xr,Rule:is,Selector:{name:"Selector",structure:{children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]},parse:function(){const t=this.readSequence(this.scope.Selector);return null===this.getFirstListNode(t)&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(t),children:t}},generate:function(t){this.children(t)}},SelectorList:ss,String:as,StyleSheet:ds,TypeSelector:gs,UnicodeRange:As,Url:Os,Value:{name:"Value",structure:{children:[[]]},parse:function(){const t=this.tokenStart,e=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(t,this.tokenStart),children:e}},generate:function(t){this.children(t)}},WhiteSpace:{name:"WhiteSpace",structure:{value:String},parse:function(){return this.eat(Ns),Rs},generate:function(t){this.token(Ns,t.value)}}},_s={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude:function(t){return this.AtrulePrelude(t.atrule?String(t.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block:function(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:pn,atrule:Dn,pseudo:Nn,node:Es},Ms={node:Es},Fs={version:"1.0.0-alpha.39"},Ws=(Bs=Object.freeze({__proto__:null,version:"1.0.0-alpha.39",default:Fs}))&&Bs.default||Bs,Us=Fe({..._s,...Ms}),js=Ws.version;return Us.version=js,Us}));
